# Actionables

## 概要

アクショナブルとは、クエリで表示されたテキストをキーにして、選択されたときに1つ以上のアクションを実行するカスタムトリガーやメニューを作成する方法です。HTMLハイパーリンクと同様に、アクショナブルはデータをキーとした外部URLを開くために使用できますが、アクショナブルはGravwellの新規クエリの送信、ダッシュボードの起動、テンプレートの実行にも利用できます。

アクショナブルは、1つまたは複数の正規表現と1つまたは複数のアクションを指定して作成されます。Gravwellは、[table](#!/search/table/table.md)や[chart](#!/search/chart/chart.md)レンダラでレンダリングされたすべてのテキストを自動的に解析し、指定されたトリガー用のメニューを作成します。

![](actionables-overview.png)

## アクション可能な構造

![](actionables-architecture.png)

アクショナブルは2つの要素で構成されています。トリガーはGravwellがテキストをマッチさせるための正規表現であり、アクションはマッチしたトリガーに対して実行されるアクションです。

1つのアクショナブルには複数のトリガーを含めることができ、トリガーは正規表現内の値を列挙することができます。例えば、「The color is green」というフレーズから「green」という色を抽出したいとします。この正規表現のトリガーを次のように書くことができます。

```The color is (?<color>.*)```

するとGravwellは名前の付いた色にマッチし、"green "という単語に対してWikipediaで色を調べるなどのアクションを提供します。

## アクショナブルの作成

アクショナブルを使い始めるには、まずメインメニューにある"Actionables"を開きます。

アクショナブルは名前ごとに表示され、同じ名前のアクショナブルが2つ存在することもあります。同じ名前のアクショナブルが存在することで、Gravwellは異なるソースの同じようなアクショナブルを自動的にグループ化することができます。例えば、NetflowキットとCoreDNSキットの両方がIPアドレスのアクショナブルを提供しており、どちらも"IP Address"という名前になっています。

![](actionables-menu.png)

## Triggers

トリガーは、[JavaScript regular expression syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)で定義されているように、単なる正規表現です。1つのアクショナブルに複数のトリガーを含めることができ、トリガーにはクエリやURL、その他のアクションで使用できるキャプチャグループを含めることができます。

例えば、次のような複数の形式の文章から指定された色を抽出するトリガーがあるとします:

```The color is (?<color>.*)```

```The sky is (?<color>.*)```

これらのトリガーの両方を持つ特定のアクショナブルについては、これらのトリガーのいずれかのインスタンスに対してリストされたアクションが表示されます。

トリガーメニューには、トリガーをテストするためのサンプルデータを入力するための"test"フィールドが用意されています。

![](actionables-trigger.png)

### トリガーのモード

トリガーには、"Click and Text"と "Text"の2つのモードがあり、アクションメニューを表示するタイミングを制御します。デフォルトのモードである "Click and Text "では、マッチしたトリガーにはハイパーリンクが張られており、ユーザーはマッチしたトリガーをクリックするだけでメニューが表示されます。

テキスト」のみのトリガーでは、ユーザーはトリガーを解析するために、まずテキストのブロックをハイライトする必要があります。テキスト」モードのトリガーは、トリガーをかけるべきテキストが、数字などの正規表現では意味のあるマッチングができない場合に有効です。この場合、"Click and Text"モードのトリガーは、すべての数字をハイパーリンクします。

![](actionables-trigger2.png)

### アクショナブルのグループ化

デフォルトでは、アクショナブルのメニューには、アクショナブル自体の名前が付けられます。同じ名前のアクショナブルは、自動的にメニューごとにグループ化されます。さらに、アクショナブルのメニュー名を指定すると、そのアクショナブルを別のメニューに強制的に組み込むことができます。これは、同じようなアクショナブルをグループ化するのに便利です。

たとえば、CoreDNSキットでは、ドメイン名の形式に基づいていくつかの実行可能ファイルを提供しています。これらのアクショナブルはそれぞれ、以下のように"DNS"メニューに入れられます。

![](actionables-grouping.png)
![](actionables-grouping2.png)

## アクション

アクションは、アクション可能なトリガーにマッチしたテキストに対して実行可能な操作を提供します。アクショナブルには、任意の数のアクションを含めることができます。アクションには、URLを開く、他の検索を起動するなどがあります。

### 変数 `_VALUE_` について

アクションの中には、トリガーの正規表現からキャプチャグループのテキストをアクション自体に使用できるものがあります。例えば、"color "というキャプチャグループの内容をURLで使用することができます。

```The color is (?<color>.*)```

キャプチャグループの内容は、URLの中で、マッチしたテキストに`_VALUE_`を使って利用することができます。

```https://en.wikipedia.org/wiki/_VALUE_```

キーワード`_VALUE_ `はマッチしたテキストのデフォルトのプレースホルダーですが、いくつかのアクションでは変更できます。

### アクションの種類

Gravwellにはいくつかのアクションが用意されており、1つのアクショナブルには任意のアクションまたはすべてのアクションを使用することができます。

#### クエリの実行

マッチしたテキストの内容を`_VALUE_`として、単純に新しいクエリを実行するアクションです。

#### テンプレートの実行

テンプレートアクションは、マッチしたテキストをテンプレートへの入力変数として、事前に作成されたテンプレートを実行します。

#### ダッシュボードの起動

launch dashboardアクションは、ダッシュボードを開きます。ダッシュボードにテンプレート変数がある場合は、マッチしたテキストをどの変数に入力するかをユーザが選択するように促されます。

![](actionables-dashboard.png)

#### URLを開きます

URLアクションは、指定されたURLとマッチしたテキストで新しいウィンドウ/タブを開くことをサポートしており、さらにアクション可能なトリガーとなった検索からの時間範囲引数を提供するための一連のタイムスタンプオプションを提供しています。

モーダルで開く "オプションは、HTMLのiframeのように、URLを現在のGravwellインスタンス内のウィンドウで開きます。

#### 保存したクエリの実行

クエリライブラリからクエリを実行することができます。


