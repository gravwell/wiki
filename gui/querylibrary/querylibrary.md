# クエリライブラリ

クエリライブラリでは、よく使う検索クエリを保存し、すぐに呼び出すことができます。[Gravwellの検索画面](#!gui/queries/queries.md)でライブラリからクエリを引き出し、[ダッシュボード](#!gui/dashboards/dashboards.md)に埋め込むことができます。

## クエリライブラリのページ

クエリライブラリ管理ページは、メインメニューの「検索」からアクセスできます。

![](library-menu.png)

このページには、ユーザーが保存したすべてのクエリのタイルが表示されます。

![](library-page.png)

## クエリの作成

クエリライブラリに新しいエントリを作成するには、実行した検索を保存する方法と、管理ページのフォー ムに入力する方法の 2 通りがあります。

### 検索からクエリを保存

手動で検索した後、その検索結果を保存したい場合は、検索結果のメニューから [クエリの保存] を選択します。

![](save-query.png)

GUIでは、保存するクエリの名前と説明を入力するダイアログが表示されます。

![](save-dialog.png)

名前と説明を入力して「Save」をクリックすると、そのクエリがクエリ・ライブラリに保存されます。

### 手動でのクエリの追加

クエリライブラリ管理ページの右上隅にある'Add'ボタンをクリックして、手動でライブラリにク エリを追加することもできます。クエリの文字列、名前、説明、およびいくつかのオプションフィールド (ラベルなど) を入力する画面が表示されます。

![](manual-query.png)

## クエリの実行

クエリを実行するには、クエリライブラリページのクエリのタイルにある検索アイコンをクリックします。タイムフレームを選択する画面が表示されるので、タイムフレームを選択すると検索が開始されます。

![](run-query.png)

![](query-timeframe.png)

クエリライブラリに保存されているクエリは、検索バーからも利用できます。検索履歴にアクセスするときと同様に、検索バーの右端にあるリストのアイコンをクリックし、ドロップダウンの下部にある「クエリライブラリ」をクリックして表示を切り替えます。これで、クエリライブラリのエントリから選択できるようになります。

![](search-bar.png)

## クエリの共有

クエリタイルの拡張メニューにある「クエリのURLを共有」をクリックすると（下図）、URLを記載したダイアログが表示されます。このURLをコピーして他のユーザーに送信すると、ユーザーはそのリンクを開いて自分でクエリを実行することができます。

![](share-query.png)

![](share-dialog.png)

また、「Change timeframe」をクリックして別のタイムフレームを選択することで、クエリで使用するタイムフレームを変更することができます。

![](share-timeframe.png)

## クエリのスケジューリング

拡張メニューの[スケジュール]を選択すると、クエリライブラリのアイテムから[スケジュール検索](#!scripting/scheduledsearch.md)を簡単に作成することができます。拡張メニューの「スケジュール」を選択すると、選択したクエリがあらかじめ入力されたスケジュール検索作成ページが表示されます。名前、説明、スケジュールなどを入力し、「保存」をクリックすると、スケジュール検索が作成されます。

![](schedule-query.png)

![](schedule-page.png)