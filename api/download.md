# 検索結果のダウンロード

各レンダラーは、さまざまな形式での検索結果のダウンロードをサポートしています。 たとえば、クエリがテーブルを介してレンダリングされる場合、結果をcsv、json、またはネイティブルックアップ形式として直接ダウンロードできます。 ダウンロード要求がブラウザから送信されている場合、ダウンロードを実行するには追加の手順が必要になる場合があります。 クライアントは、有効なJWTを使用してWebサーバーに対して認証されている必要があり、ユーザーは検索をダウンロードするために検索にアクセスできる必要があります。 ダウンロードリンクは、他のすべてのAPIURLと同様に標準のJWTトークンスキームを使用して保護されます。

## 検索結果のダウンロード

ID150460229の検索をCSV形式でダウンロードします。
```
GET /api/searchctrl/150460229/download/csv
```
## 一時的なJWTトークンを介してダウンロードにアクセスします

WebブラウザはJavaScriptを介してファイルのダウンロードを実行できないため（したがって、リクエストヘッダーを介してJWTを配信できないため）、検索結果のダウンロードは、「token」という名前のCookieに保存されている一時的なJWTを使用して認証することもできます。 クライアントは、通常のJWTトークンをCookieに保存することを**すべきではありません**。代わりに、クライアントは、検索結果のダウンロードに**のみ**使用できる一時的なJWTを要求する必要があります。 これらの一時的なJWTトークンは、ダウンロードAPI URLへのアクセスのみを許可し、他のAPIでは（ヘッダーまたはCookieとして）使用できません。 一時的なJWTトークンは3秒間有効です。

ダウンロードリクエストの一部として追加のヘッダーを配信できる非ブラウザベースのクライアントは、一時的なJWTトークンとCookieのビジネスを無視して、適切なリクエストヘッダーで通常のJWTトークンを送信することができます。 サーバーが標準ヘッダーで有効なJWTトークンを検出した場合、サーバーはそれを認証に使用します。

### JWT一時トークンの取得

```
GET /api/login/tmptoken:
{
        "LoginStatus": true,
	"JWT": "7b22616c676f223a36323733382c22747970223a226a7774227d.7b22756964223a312c2265787069726573223a22323031382d30362d32305431333a32343a32382e393436393338312d30363a3030222c22696174223a5b3138312c36312c35382c3138352c3139322c3135392c3233302c3130372c37312c33322c3130382c33332c3134362c3138362c37392c35372c35382c33342c3135362c36342c33322c3234372c39352c35352c3138342c3235322c3135312c39382c34322c31382c35312c375d7d.cec81d84a3c96e8fd6961c1113a026eba08344d06d518e65f28bd6b92655fb6a22433fd6e42b51d62d45f8ed2a1665f3f951019b982251ebc614e8be5e4fdb6e"
}

```

ブラウザは、有効期限が3秒の"token"という名前のCookieでGETリクエストのJWT値を発行する必要があります。Cookieは、検索結果のダウンロード以外のAPIでは許可されません。
