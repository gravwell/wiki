## Enrich

`enrich`モジュールは、パイプラインの各エントリに列挙値を追加することができます。これらの値は、モジュールの引数で指定することも、リソースから取得することもできます。これらの値は、モジュールの引数で指定することもできますし、リソースから取得することもできます。 `enrich` を使用すると、"User=admin" のような一定の列挙値でデータに注釈を付けることができ、可視化やレポート作成、複合クエリ内でのピボット処理、非時系列データの処理などを簡素化することができます。 

### サポートされているオプション

* `-r`: オプション。`-r` オプションには引数が必要で、データを抽出するリソースの名前または UUID を指定します。
* `-o`: オプション。指定された既存の列挙値を上書きします。通常は `-r` と組み合わせて使用します。

### 文字列定数でのエンリッチング

`enrich`の最もシンプルな使い方は、列挙値やデータをクエリ内で指定することです。例えば、"foo"という列挙値と"bar"という値をすべてのエントリに追加するには、列挙値の名前と内容を空白で区切って指定するだけです:

```
tag=jsondata json val | enrich foo bar | table val foo
```

複数の列挙値のペアを指定することもできます。例えば、列挙値"foo"と"bar"をそれぞれ異なる内容で作成するには:

```
tag=jsondata json val | enrich foo "my data" bar "my other data" | table val foo bar
```

### リソースでのエンリッチング 

`enrich`モジュールは、CSVやルックアップテーブルのリソースからカラムを抽出することができます。リソースを利用する場合、`enrich`は最初の行のみを利用します（CSVリソースの場合はカラムヘッダを除く）。カラムは指定することができ、何も指定されていない場合はすべてのカラムが使用されます。列が既存の列挙値と競合する場合は、`-o`フラグを使用した場合のみ上書きされます。 

例えば、リソース "data" のカラム "foo" と "bar" を使用する場合:

```
tag=jsondata val | enrich -r data foo bar | table val foo bar
```

さらに、列挙値の名前は、`as`キーワードを使うことで、列名とは異なる名前にすることができます。例えば、"foo"というカラムを使って列挙するが、結果として得られる列挙値の名前を "bar" とするには、次のようにします:

```
tag=jsondata val | enrich -r data foo as bar | table val bar
```

注意：`enrich`モジュールでは、リソースの最初の行のみが使用されます（CSVリソースのカラムヘッダは除く）。
