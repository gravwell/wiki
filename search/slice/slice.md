## Slice

スライスモジュールは、エントリ/列挙値内のオフセットを指定し、オプションでそれらのバイトを特定の型にキャストすることで、エントリまたは列挙値からバイトを抽出するための強力で非常に低レベルのツールです。  スライスは、負の数を含む相対インデックスを介してバイトを参照できます。

次の検索では、 "data"列挙値の最初の2バイトを読み取り、それを16ビットビッグエンディアン整数として解析することによって、トヨタ車のキャンバスメッセージからRPMを抽出します。

```
tag=CAN canbus ID=0x2C4 | slice uint16be(data[0:2]) as RPM | mean RPM | chart mean
```

スライスは生のエントリの内容から抽出することも、列挙値を操作することもできます。  抽出されたバイトは、整数や文字列など、オプションで別の型に解析できます。  いくつかの例:

| コマンド | 説明 |
|---------|-------------|
| `slice [0:4] as foo` | エントリのデータから最初の5バイトを直接抽出し、列挙値"foo"に配置します |
| `slice Payload[9] as tenth` |  列挙値"Payload"から10バイト目を抽出します |
| `slice uint16le(Payload[9:10]) as value` | 列挙値"Payload"から2バイトを引き出し、符号なし16ビットリトルエンディアンとして解析し、"value"として保存します。 |
| `slice uint16be(Payload[-2:]) as value` | "Payload"から最後の2バイトを取り出し、符号なし16ビットビッグエンディアン整数として解析し、"value"として保存します。 |
| `slice uint16be(Payload[-4:-2]) as value2` | "Payload"の最後の2バイトに先行する2バイトをプルし、それらを符号なし16ビットビッグエンディアン整数として解析し、"value2"として格納します。

### サポートされている型

スライスモジュールの不可欠な機能は、データを適切な型にキャストすることです。  デフォルトでは、データはバイトスライスとして抽出されますが、オプションcastを使用すると、データを型に変換できます。  「be」の接尾辞を持つ型は[ビッグエンディアン](https://en.wikipedia.org/wiki/Endianness)のビット順を示し、「be」接尾辞のないものはリトルエンディアンのビット順を使用します。


* byte
* int16
* int16le
* int16be
* uint16
* uint16le
* uint16be
* int32
* int32le
* int32be
* uint32
* uint32le
* uint32be
* int64
* int64le
* int64be
* uint64
* uint64le
* uint64be
* float32
* float32le
* float32be
* float64
* float64le
* float64be
* array
* string

### インラインフィルタリング

スライスモジュールは、バイナリデータの非常に高速な処理を可能にするインラインフィルタリングをサポートします。  すべてのタイプがすべてのフィルタ操作をサポートするわけではありません。  たとえば、浮動小数点数からサブセットを見つけようとしても意味がなく、バイトスライスに「小なり」を適用しても意味がありません。  以下は、フィルタ演算子の完全なリストと、どの演算子をどのタイプに適用できるかを示す表です:

#### フィルタ演算子

| オペレーター | 名 | 説明
|----------|------|-------------
| == | 等しい | フィールドは等しくなければなりません
| != | 等しくない | フィールドは等しくてはいけません
| < | 未満 | フィールドはより小さい
| > | より大きい | フィールドはより大きくなければなりません
| <= | 以下 | フィールドは以下でなければなりません
| >= | 以上 | フィールドは以上でなければなりません
| ~ | サブセット | フィールドはメンバーでなければなりません
| !~ | サブセットではない | フィールドはメンバーであってはいけません

#### タイプ別サポート演算子

Type     | == | != | ~ | !~ | < | <= | > | >=
----------|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:
byte     | X | X |  |  | X | X | X | X 
int16    | X | X |  |  | X | X | X | X
int16le  | X | X |  |  | X | X | X | X
int16be  | X | X |  |  | X | X | X | X
uint16   | X | X |  |  | X | X | X | X
uint16le | X | X |  |  | X | X | X | X
uint16be | X | X |  |  | X | X | X | X 
int32    | X | X |  |  | X | X | X | X
int32le  | X | X |  |  | X | X | X | X
int32be  | X | X |  |  | X | X | X | X
uint32   | X | X |  |  | X | X | X | X
uint32le | X | X |  |  | X | X | X | X
uint32be | X | X |  |  | X | X | X | X
int64    | X | X |  |  | X | X | X | X
int64le  | X | X |  |  | X | X | X | X
int64be  | X | X |  |  | X | X | X | X
uint64   | X | X |  |  | X | X | X | X
uint64le | X | X |  |  | X | X | X | X
uint64be | X | X |  |  | X | X | X | X
float32  | X | X |  |  | X | X | X | X
float32le| X | X |  |  | X | X | X | X
float32be| X | X |  |  | X | X | X | X
float64  | X | X |  |  | X | X | X | X
float64le| X | X |  |  | X | X | X | X
float64be| X | X |  |  | X | X | X | X
array    | X | X | X | X |  |  |  |
string   | X | X | X | X |  |  |  |

