# split

split モジュールは、エントリーや列挙値の内容を複数のエントリーに分割することができます。

## サポートされているオプション

オプションの後に名前を指定すると、エントリ自体のコンテンツではなく、指定された列挙値を分割するよう split モジュールに通知します。名前を省略した場合は、そのエントリに対して操作を行います。

* `-d <delim>`: 区切り文字を指定します。セミコロンのような1文字でも、文字列でも、スペースを含む文字列でも、引用符で囲めばOKです。
* `-clean`: データを分割した後に、各文字列の左端と右端にあるタブやスペース、引用符などの文字を整理するようにモジュールに指示します。したがって、`foo ,'bar', baz` を含むエントリは、`foo`, `bar`, `baz` を含む3つのエントリに分割されます。

## 使用例

これらの例では、以下のようなエントリー例を考えてみます。

![](data.png)

### 基本的な分割

split モジュールを追加の引数なしで指定すると、デフォルトのデリミタ（区切り文字）であるカンマに基づいてエントリが分割されます。

```
tag=default split
```

![](s1.png)

### clean フラグの使用

また、`-clean` フラグを追加すると、末尾/先頭の引用符とホワイトスペースが削除されることがわかります。

```
tag=default split -clean
```

![](s2.png)

### デリミタの指定

エントリーの中には、タブが含まれているものもあります。その場合は`-d`フラグを使って分割することができます。

```
tag=default split -d "\t"
```

![](s3.png)

あるエントリー `a	b	c` は、すべてのフィールドの間にタブがあったため、3つのエントリーにきれいに分割されたことに注意してください。一方、別のエントリー`"a",  b, c	,d'`は、'c' と ',' の間に1つのタブ文字が含まれているため、2つに分割されました。

また、任意の文字列をデリミタとして指定することもできます。

```
tag=default split -d custom
```

![](s4.png)

## 列挙値の使用例

この例では、[JSON ジェネレーター](https://github.com/gravwell/generators) のエントリを使用して、split モジュールが列挙値に対してどのように操作できるかを説明します。

![](ev.png)

JSON 構造から「useragent」フィールドを抽出して、カンマで分割すればいいのです。

```
tag=json json useragent | split useragent | table useragent
```

![](evdata.png)

なお、エントリーの生の内容は変更されません。

```
tag=json json useragent | split useragent | table useragent DATA
```

![](evcontents.png)
