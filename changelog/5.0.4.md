# Changelog for version 5.0.4

### Released June 30 2022

## Web UI Changes

### Bug Fixes

* Fix an issue where saved searches are not included in backups
* Fix an issue where dashboard searches launch repeatedly
* Use default timeframe when producing share URL data for saved query
* Wrap table cols by default
* Update dashboard URL when variables update
* Fix an issue where DateRange timeframe sometimes initializes without a default date
* Make it possible to have global Macros
* Fix an issue where dashboard searches are not stopped on navigation
* Fix an issue where an admin can only filter other users' macros if they have at least one macro
* Dropdown checkbox not working properly on systems/indexers
* Fix an issue where unnecessary requests were made when favoriting/unfavoriting items


### New Additions

* New flow nodes: JSON Encode, JSON Decode, Throttle, Mattermost Message

## Backend Changes

### New Features
* Changed Systems API to report uncompressed size by default and added a compressed size member in API responses.
* Improved logic around HTTP node to respect additional content types in responses.
* Improved handling of webserver ingest when entries have a zero value timestamp.
* Improved handling of webserver ingest with every large entries.

### Bug Fixes

* Improved handling of corrupted storage during ingest.
* Added integrated recovery systems so that indexers can recover from storage corruption at ingest time.
* Improved sanity checking on HTTP node when responses are very large.
* Fixed issue where template would not show up in API responses immediately after creation.
* Fixed issue where admins could not create globally accessible macros.
* Fixed SDK to include method to remove SearchGroup from user.
* Fixed issue where malformed packets could break the pcap renderer.
* Fixed issue where CEF module was not properly filtering entries.
* Fixed issue where where some APIs allowed AX definitions to be updated with invalid specifications.
* Fixed issue where dump module was not hinting the table renderer properly.

## Ingester Changes

* Improved error handling of WinEvents ingster when Event Channels are missing or removed.
* Improved recovery when an Event Channel is created while running.
* Fixed issue where logging Fatal call was displaying the wrong file and line number.
* Updated Google PubSub ingester to require fewer permissions.
* Added new "time tester" tool which can help debug timestamp parsing issues.
